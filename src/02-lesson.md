# Занятие №2

**Тема**  
Единицы количества информации и арифметика над ними, кодирование информации, объём информации. Особенности кодирования изображений, видео и аудио, пропускная способность канала связи.  
Задания ЕГЭ: 7, 11

Второе занятие посвящено заданиям, связанным с кодированием информации. 7 и 11 задания решаются с помощью простых уравнений, высчитывающихся на компьютере.

## Задание №7

В 7 задании вам предлагается решить задачу, связанную с одним из вышеупомянутых типов файлов. Вам даются некоторые параметры файла (объём, разрешение, глубина цвета, частота дискретизации, количество каналов и т.п.) и просят найти на их основе другие параметры файла, или то, как они изменятся после определённых преобразований.

### Теория

Все 7-ые задания объединяет понятие объема.  
_Объём целого = количество кусочков $\times$ объём кусочка_  
Конечно, речь будет идти об объёме информации/памяти, которую занимает файл. В разных вариантах задания чаще всего встречаются следующие типы файлов: изображения, аудиофайлы, видеофайлы. Давайте разберёмся с каждым из них.

Изображение/Картинка состоит из пикселей, а цвет каждого пикселя кодируется набором бит.
(То же самое, что и в 4 задании с кодовыми словами для букв)
Важное отличие от 4 задания в том, что в 7-ом для пикселей используется равномерное кодирование, если не сказано обратного. Это значит, что каждый возможный цвет пикселя кодируется одинаковым количеством бит.
Очевидно, что чем больше бит используется для кодирования цвета, тем больше цветов в палитре может быть. Количество цветов в палитре равно количеству различных кодовых слов, которые можно составить из $i$ бит, где $i$ - длина кодового слова (глубина цвета).  
Тут можно вспомнить стандартную кодировку RGB. В ней для кодирования цвета используется 24 бита.
Первые 8 бит определяют вклад красного цвета, следующие 8 - зеленого, и последние 8 - синего.
Важно понимать, что кодировка совсем необязательно должна иметь такую логическую расшифровку и может быть просто сопоставлением кодовых слов и цветов.  
Обычно количество пикселей в картинке либо задано явно, и равняется произведению ширины изображения на его высоту, либо вычисляется через её физический размер и разрешение.
Разрешение картинки - линейная величина, характеризующая количество пикселей на единицу длины (обычно дюйм). Более подробное определение разрешения будет чуть позже.
Возвращаясь к понятию объёма, можно сказать, что объём картинки равен произведению количества пикселей в ней на глубину цвета, то есть количество бит, отведенных на кодирование цвета одного пикселя.

Видеофайлы состоят из последовательности изображений, которые называются кадрами. Количество кадров в секунду называется частотой кадров. Объём видеофайла равен произведению количества кадров на объём одного кадра. Также в видеофайлах может быть звук, который кодируется аналогично аудиофайлам, но в ЕГЭ под видео обычно подразумевается только последовательность изображений.

Аудиофайлы в свою очередь состоят из записей звука, которые кодируются с помощью аналогово-цифрового преобразования. Это значит, что звуковой сигнал разбивается на кусочки, и каждый из них кодируется с помощью цифрового кода. Чем больше бит отведено на кодирование одного кусочка звука, тем больше уровней звука можно закодировать. Важно понимать, что частота дискретизации и глубина кодирования независимы друг от друга. Частота дискретизации - это количество раз в секунду, которое происходит преобразование аналогового звукового сигнала в цифровой. Глубина кодирования - это количество бит, выделяемое на одно преобразование сигнала.

![](src/images/2-lesson/image1.jpg){ width=80% }

Несколько раз в секунду записывается значение звука. Чем больше частота дискретизации, тем чаще записываются значения (это похоже на разрешение картинки) и чем больше глубина звука, тем больше разных значений звука можно записать (это похоже на палитру для цветов пикселей). Для аудиофайлов ещё существует понятие количества каналов. Оно определяет, сколько различных звуковых сигналов записывается. Например, если записывается только один сигнал, то это моно, если два - стерео, если четыре - квадро. Объём аудиофайла равен произведению количества кусочков звука на объём одного кусочка на количество каналов.

**Бит** — единица измерения количества информации. Бит может принимать два значения: `0` или `1`.  
**Байт** — 8 бит.

Далее по смыслу идут понятия килобайта, мегабайта, гигабайта, терабайта и т.п. Чаще всего в повседневной жизни мы слышим именно эти слова, однако большинство людей используют их не совсем корректно. Приставки кило-, мега-, тера-, пришедшие из системы СИ, обозначают шаг в 1000 ($10^3$) раз. Как в килограмме 1000 грамм, так и в килобайте должно быть 1000 байт. Практика показала, что гораздо удобнее для единиц измерения информации сделать шаг в 1024 ($2^{10}$) раза, а не в 1000. Чтобы избежать путаницы, были придуманы специальные двоичные приставки[^3]. Соответственно, в кибибайте 1024 байта, в мебибайте 1024 кибибайта и так далее.

[^3]: Подробнее можете почитать на [википедии](http://ru.wikipedia.org/wiki/%D0%94%D0%B2%D0%BE%D0%B8%D1%87%D0%BD%D1%8B%D0%B5_%D0%BF%D1%80%D0%B8%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B8). [@wikipediabinarymeasure]

![Источник: [@wikipediabinarymeasure]](src/images/2-lesson/image2.jpg){ width=80% }

Этот интересный факт вводился исключительно для расширения кругозора студента и практической пользы при решении заданий ЕГЭ не несёт. А вот что действительно важно запомнить, так это то, что в **ЕГЭ всегда имеется в виду шаг в 1024 раза.**

**КБайт/Кбайт/Килобайт...** — 1024 байта  
**МБайт/Мбайт/Мегабайт...** — 1024 Кбайта  
**ГБайт/Гбайт/Гигабайт...** — 1024 Мбайта  
и так далее

**Глубина цвета** — количество бит, необходимых для хранения цвета каждого пикселя.  
Формула веса картинки: $I = i \times w \times h$, где $I$ - вес картинки в битах, $i$ - глубина цвета, $w$ - ширина картинки, $h$ - высота картинки.
Если глубина цвета $i$, то максимальное количество возможных цветов равно $2^i$.
Выразив в этой формуле глубину через количество цветов ($M$), получим: $i = ceil(\log_2(M))$, где $ceil$ - операция округления вверх.  
**Разрешение/ppi/dpi** — это количество пикселей на дюйм размера изображения (ppi - pixels per inch, dpi - dots per inch).  
Важно понимать, что здесь дюйм не квадратный, а линейный. Соответственно, при изменения разрешения в $k$ раз количество пикселей изменится в $k^2$ раз.  
**Глубина кодирования/Разрешение (аудио)** — количество бит, выделяемое на одно преобразование сигнала.  
**Частота дискретизации** – количество раз в секунду, которое происходит преобразование аналогового звукового сигнала в цифровой. Измеряется в Герцах (Гц).  
Возможна запись нескольких каналов: одного (моно), двух (стерео), четырех (квадро).  
Формула веса аудиофайла: $A = i \times f \times k \times t$, где $A$ - вес аудиофайла в битах, $i$ - разрешение, $f$ - частота дискретизации, $k$ - количество каналов, $t$ - длина аудио в секундах.
Точно так же, как и для палитры цветов в картинках, для аудио можно посчитать количество уровней дискретизации (уровней звука) по формуле $M=2^i$  
**Пропускная способность канала** — скорость передачи информации по каналу связи. Вычисляется как количество информации в битах, переданное за 1 секунду (бит/с)  
Несложно догадаться, что количество переданной за время $t$ по каналу информации можно вычислить умножив $t$ на пропускную способность канала.

### Методика решения

Можно придумать много вариантов 7 заданий, жонглирующих вышеупомянутыми базовыми понятиями. Все они решаются одинаково: составляется простое выражение, в него подставляются значения и результат вычисляется на компьютере. В этом задании важно внимательно следить за используемыми единицами.

### Варианты задания

- [Количество цветов](#количество-цветов)
- [Длительность аудио](#длительность-аудио)
- [Уровни звука](#уровни-звука)
- [Преобразования файла](#преобразования-файла)
- [Пропускная способность](#пропускная-способность)
- [Разрешение](#разрешение)
- [Арифметика с файлами](#арифметика-с-файлами)
- [Прочие варианты задания 7](#прочие-варианты-задания-7)

#### Количество цветов

(8F7E3D) Для хранения растрового изображения размером 315 × 3072 пикселей отведено не более 735 Кбайт памяти без учёта размера заголовка файла. Для кодирования цвета каждого пикселя используется одинаковое количество бит, коды пикселей записываются в файл один за другим без промежутков. Какое максимальное количество цветов можно использовать в палитре изображения?  
_Ответ: 64_  
**Решение**  
Вспоминаем формулу веса картинки: $I = i \times w \times h$. Выражаем из неё глубину цвета: $i=\frac{I}{w \times h}$.  
Из условия: $w=315, h=3072, I=735 \times 1024 \times 8$  
Подставляем в формулу: $i=\frac{735 \times 1024 \times 8}{315 \times 3072}=6\frac{2}{9}$  
Получаем дробное значение. Надо понимать, что в жизни глубина цвета может быть только целой, потому что это количество бит, отведенных на хранение цвета. Такой результат стоит понимать следующим образом: если глубина цвета 6 бит, то картинка уместится в 735 Кбайт, а если больше, то уже нет. Значит, в нашем случае глубина цвета равна 6. А раз так, то количество возможных цветов равно $2^6=64$.

_Все 7-ые задания решаются с помощью простых уравнений. Решать их на бумаге, конечно же, не надо. У вас в распоряжении есть компьютер с Python и Excel - пользуйтесь._

```shell {title="Пример использования консоли Python в качестве калькулятора"}
$ python3
Python x.y.z (main, date, time)
Type "help", "copyright", "credits" or "license" for more information.
>>> from math import *
>>> log2(256)
8.0
```

#### Длительность аудио

(21EE42) Производилась четырёхканальная (квадро) звукозапись с частотой дискретизации 96 кГц и 24-битным разрешением.
В результате был получен файл размером 792 Мбайт, без учёта размера заголовка и без сжатия данных. Определите длительность звукозаписи (в минутах). В качестве ответа укажите ближайшее к полученному времени записи целое число.  
_Ответ: 12_  
**Решение**  
Вспоминаем формулу веса аудиофайла: $A = i \times f \times k \times t$. Выражаем длительность: $t = \frac{A}{i \times f \times k}$.
Подставляем значения из условия:  
$t = \frac{A}{i \times f \times k} = \frac{792 \times 1024 \times 1024 \times 8}{24 \times 96 \times 1000 \times 4} \approx 720.896$ секунд, а значит $\frac{720.896}{60} \approx 12.015$ минут.
Ответ просят округлить до ближайшего целого $\Rightarrow$ 12.  
Здесь важно не забыть перевести килогерцы в герцы и секунды в минуты.

#### Уровни звука

Одноканальная (моно) звукозапись с частотой дискретизации 17 кГц и длительностью 5 минут сохраняется в файл без сжатия данных. Объём полученного файла не должен превышать 10 Мбайт. Определите наибольшее количество уровней звука цифрового дискретного сигнала, которое можно использовать при кодировании звукозаписи. В ответе укажите целое число.  
_Ответ: 65536_  
**Решение**  
Задача аналогична предыдущей, только найти в этот раз надо количество уровней звука.
Вспоминаем формулу веса аудиофайла: $A = i \times f \times k \times t$. Выражаем глубину кодирования: $i=\frac{A}{f \times k \times t}$
Подставляем: $i = \frac{A}{f \times k \times t} = \frac{10 \times 1024 \times 1024 \times 8}{17 \times 1000 \times 1 \times 5 \times 60} \approx 16.4$ $\Rightarrow$ максимальная глубина 16 $\Rightarrow$ количество уровней звука равно $M=2^16=65536$

#### Преобразования файла

Автоматическая камера производит видео без звука с частотой 120 кадров в секунду и глубиной цвета в 30 бит. 5 минут видео в среднем занимают 60 Мбайт. При отправлении видео через мессенджер, файл преобразуется так, что частота кадров уменьшается до 30 кадров в секунду, а цвета пикселей кодируются с использованием палитры из 16777216 цветов. Других изменений не производится. Сколько Мбайт в среднем занимает 30 минут преобразованного видео?  
_Ответ: 72_  
**Решение**  
Для решения задачи надо посмотреть во сколько раз изменит размер файла каждая операция с ним.  
Было 120 кадров в секунду, а стало 30 $\Rightarrow$ файл стал в 4 раза меньше.  
Была глубина цвета 30, а стала $\log_2(16777216)=24$ $\Rightarrow$ файл стал в $\frac{30}{24}$ раз меньше.  
Получается, что файл стал в $4 \times \frac{30}{24} = 5$ раз меньше $\Rightarrow$ 5 минут преобразованного видео займут $60 \times \frac{1}{5} = 12$ Мбайт $\Rightarrow$ 30 минут займут $12 \times \frac{30}{5} = 72$ Мбайта.  
Важно проследить в каких единицах требуется ответ. В нашем случае ответ нужно дать в Мбайтах и дальнейших преобразований не требуется.

#### Пропускная способность

(DD5D87) Голосовое сообщение продолжительностью 120 с было записано в формате стерео и оцифровано с глубиной кодирования 16 бит и частотой дискретизации 56 000 измерений в секунду. Сжатие данных не использовалось. Файл с оцифрованным голосовым сообщением был передан по каналу связи, пропускная способность которого 32 000 бит/с. Сколько секунд длилась передача файла? В ответе запишите целое число, единицу измерения указывать не нужно.  
_Ответ: 6720_  
**Решение**  
Вычисляем объём файла: $120 \times 56000 \times 16 \times 2 = 215040000$  
Пропускная способность канала 32000 бит/с, то есть за 1 секунду можно передать 32000 бит. $\Rightarrow$ за $\frac{215040000}{32000} = 6720$ секунд можно передать весь файл.

#### Разрешение

В настройках сканера можно выбрать разрешение сканирования и глубину цвета. При сканировании фотографии с разрешением 600 dpi и глубине цвета в 24 бита получился файл размером 54 Мбайта. Сколько Мбайт памяти займёт файл, если разрешение сканирования уменьшить до 400 dpi, а глубину цвета до 16 бит?  
_Ответ: 16_  
**Решение**  
Задача ничем не отличается от предыдущих, за исключением использования понятия разрешения картинки.  
Было 600 dpi, а стало 400 dpi $\Rightarrow$ количество пикселей на дюйм уменьшилось в $\frac{600}{400} = \frac{3}{2}$ раза. $\Rightarrow$ общее количество пикселей уменьшилось в $\frac{3}{2} \times \frac{3}{2} = \frac{9}{4}$ раз.  
Была глубина 24 бита, а стала 16 $\Rightarrow$ файл уменьшился в $\frac{24}{16} = \frac{3}{2}$ раза.
Значит размер файла в итоге стал в $\frac{9}{4} \times \frac{3}{2} = \frac{27}{8}$ раз меньше. $\Rightarrow$ новый размер файла равен $\frac{54}{\frac{27}{8}} = 16$ Мбайт.

#### Арифметика с файлами

Растровую картинку с палитрой из 65536 цветов перекодировали с использованием палитры из 256 цветов. При этом размер файла уменьшился на 21 Кбайт. Определите исходный размер файла в Кбайтах.  
_Ответ: 42_  
**Решение**  
В этой задаче надо составить простейшее уравнение:  
Была глубина цвета $\log_2{65536} = 16$, а стала $\log_2{256} = 8$ $\Rightarrow$ файл уменьшился в 2 раза. $\Rightarrow$ $x - 21 = \frac{x}{2}$ $\Rightarrow$ $x = 42$.
Получаем исходный размер в 42 Кбайта.

#### Прочие варианты задания 7

Так же встречаются задачи, в которых нужно найти:

- Минимальный объем памяти, чтобы в нём уместился файл с заданными параметрами

## Задание №11

В 11 задании вам предлагается решить задачу, связанную с кодированием информации. Обычно вам предоставляются сведения о том, из каких частей состоит запись и некоторые параметры алфавитов, в которых эти части записываются. Просят же найти объём памяти, необходимый для хранения одной или нескольких таких записей. 11 задание похоже на 7-ое, но в нём используются понятия алфавита и мощности алфавита.

### Теория

**Алфавит** — конечное множество символов.  
**Мощность алфавита** — количество элементов алфавита. (Например, у алфавита русских заглавных букв мощность 33)  
Чтобы равномерно закодировать все элементы алфавита двоичной кодировкой, понадобятся кодовые слова длины $i = ceil(\log_2(M))$ бит, где $M$ - мощность алфавита.

Не забываем мысль из 7 задания:  
_Объем целого = количество кусочков $\times$ объем кусочка_

### Методика решения

Решается 11 задание так же, как и 7: составляется простое выражение, в него подставляются значения и результат вычисляется на компьютере.

### Варианты задания

- [Примитив 11](#примитив-11)
- [С округлением](#с-округлением)
- [Арифметика с байтами](#арифметика-с-байтами)
- [Максимальная сложность 11](#максимальная-сложность-11)
- [Прочие варианты задания 11](#прочие-варианты-задания-11)

#### Примитив 11

При регистрации в компьютерной системе для каждого пользователя создаётся запись в базе данных. Каждая такая запись содержит информацию о дате рождения пользователя и состоит из 3 полей: год (число от 1000 до 2100), номер месяца (число от 1 до 12) и номер дня в месяце (число от 1 до 31). Все поля записываются отдельно с использованием минимально возможного количества бит. Определите объём памяти в битах, отводимый для хранения одной такой записи.  
_Ответ: 20_  
**Решение**  
Мощность алфавита годов - $2100-1000=1100$ $\Rightarrow$ для записи одного года из него понадобится $ceil(\log_2(1100))=11$ бит  
Мощность алфавита месяцев - 12 $\Rightarrow$ для записи одного месяца из него понадобится $ceil(\log_2(12))= 4$ бита  
Мощность алфавита дней - 31 $\Rightarrow$ для записи одного дня из него понадобится $ceil(\log_2(31))=5$ бит  
$\Rightarrow$ для одной записи нужен $11+4+5=20$ бит

#### С округлением

(3C8F7E) При регистрации в компьютерной системе каждому объекту присваивается идентификатор, состоящий из 65 символов и содержащий только десятичные цифры и символы из 2500-символьного специального алфавита. В базе данных для хранения сведений о каждом идентификаторе отведено одинаковое и минимально возможное целое число байт. При этом используется посимвольное кодирование идентификаторов, все символы кодируются одинаковым и минимально возможным количеством бит.
Определите объём памяти (в Кбайт), необходимый для хранения сведений о 16 384 объектах.
В ответе запишите только целое число – количество Кбайт.  
_Ответ: 1568_  
**Решение**  
Мощность алфавита - $10 + 2500 = 2510$ $\Rightarrow$ для записи одного символа из него понадобится $ceil(\log_2(2510))=12$ бит  
Всего в идентификаторе 65 символов и в условии сказано, что идентификаторы кодируются посимвольно $\Rightarrow$ для записи одного идентификатора потребуется $65 \times 12 = 780$ бит.  
В условии также сказано, что идентификаторы кодируются целым количеством байт, а значит надо 780 бит перевести в байты с округлением вверх: $\frac{780}{8}=97.5$ $\Rightarrow$ один идентификатор записывается 98 байтами. $\Rightarrow$ для 16384 идентификаторов нужно $98 \times 16384=1605632$ байт $\Rightarrow$ $\frac{1605632}{1024}=1568$ Кбайт.

#### Арифметика с байтами

(25ACB1) При регистрации в компьютерной системе каждому пользователю выдаётся пароль, состоящий из 7 символов и содержащий только десятичные цифры и символы из 26-символьного набора прописных латинских букв. В базе данных для хранения сведений о каждом пользователе отведено одинаковое и минимально возможное целое число байт. При этом используют посимвольное кодирование паролей, все символы кодируют одинаковым и минимально возможным количеством бит. Кроме собственно пароля, для каждого пользователя в системе хранятся дополнительные сведения, для чего выделено целое число байт; это число одно и то же для всех пользователей.  
Для хранения сведений о 30 пользователях потребовалось 750 байт. Сколько байт выделено для хранения дополнительных сведений об одном пользователе? В ответе запишите только целое число – количество байт.  
_Ответ: 19_  
**Решение**  
Мощность алфавита символов для пароля - $10+26=36$ $\Rightarrow$ для записи одного символа из него понадобится $ceil(\log_2(36))=6$ бит.  
В пароле 7 символов $\Rightarrow$ для его хранения нужно $6 \times 7=42$ бита, а это, округляя вверх, 6 байт.  
Пусть для записи дополнительных сведений одного пользователя нужно $x$ байт, тогда:

$$
\begin{aligned}
30(x + 6) &= 750\\
30x + 180 &= 750\\
        x &= \frac{570}{30}\\
        x &= 19
\end{aligned}
$$

#### Максимальная сложность 11

При регистрации в компьютерной системе каждому объекту присваивается идентификатор некоторой длины. Идентификатор может состоять из шестнадцатеричных цифр, латинских букв (строчных и прописных) и символов из набора: "`! @ # $ % &`". В базе данных для хранения каждого идентификатора отведено одинаковое и минимально возможное целое число байт. При этом используется посимвольное кодирование идентификаторов, все символы кодируются одинаковым и минимально возможным количеством бит. Для хранения идентификаторов 2077 объектов доступно 722 Кбайта памяти. Какую максимальную длину может иметь идентификатор? В ответе запишите только целое число – количество символов в идентификаторе.  
_Ответ: 405_  
**Решение**  
_Способ 1_  
Символ в идентификаторе может быть одной из 16 цифр, одной из 26 строчных букв или одной из 26 прописных букв, одним из 6 символов в наборе $\Rightarrow$ мощность алфавита символов для идентификатора равна $16+26+26+6=74$ $\Rightarrow$ для записи одного символа из него понадобится $ceil(\log_2(74))=7$ бит.  
Если для 2077 идентификаторов доступно 722 Кбайта ($722 \times 1024$ байта), то на каждый идентификатор получается $\frac{722 \times 1024}{2077} \approx 355.96$ байт. Поскольку мы не можем использовать больше объема чем доступно, то, округляя вниз, получаем, что для каждого идентификатора доступно 355 байт.
Если идентификатор должен занимать 355 байт, а каждый символ в нем занимает 7 бит, то может уместиться $\frac{355 \times 8}{7}=405$ символов (округлили вниз) $\Rightarrow$ максимальная допустимая длина идентификатора равна 405.  
_Способ 2_  
Практика показывает, что на реальном экзамене чаще всего встречаются наиболее примитивные варианты заданий, но лучше быть готовым к любым сложностям. Решив эту задачу 1 способом, вы могли заметить, что процесс оказался достаточно трудоёмким. Поэтому знайте, что такие задачи можно решать и программно, просто для большинства вариантов этого задания это будет подобно стрельбе из пушки по воробьям.

```python
from math import log2, ceil

bits_per_symbol = ceil(log2(16 + 26 + 26 + len("!@#$%&")))

for length in range(1000):
    total_bits = length * bits_per_symbol
    total_bytes = total_bits // 8 + (1 if total_bits % 8 else 0)
    if total_bytes * 2077 > 722 * 1024:
        print(length - 1)  # 405
        break
```

#### Прочие варианты задания 11

Так же встречаются задачи, в которых нужно найти:

- Максимальное количество записей/сведений/... которые можно хранить в ограниченном объёме памяти
